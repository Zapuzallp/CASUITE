# Generated by Django 4.2.14 on 2025-12-22 18:07

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import django.db.models.functions.datetime


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Client',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('client_name', models.CharField(help_text='Name of Individual or Entity', max_length=255)),
                ('primary_contact_name', models.CharField(help_text='Name of the person to contact', max_length=255)),
                ('pan_no', models.CharField(max_length=20, unique=True, verbose_name='PAN Number')),
                ('aadhar', models.CharField(blank=True, max_length=20, null=True, verbose_name='Aadhar Number')),
                ('din_no', models.CharField(blank=True, help_text='Director Identification Number (if Individual)', max_length=50, null=True, verbose_name='DIN')),
                ('tan_no', models.CharField(blank=True, max_length=20, null=True, verbose_name='TAN')),
                ('email', models.EmailField(max_length=254)),
                ('phone_number', models.CharField(max_length=20)),
                ('address_line1', models.TextField()),
                ('city', models.CharField(max_length=100)),
                ('state', models.CharField(max_length=100)),
                ('postal_code', models.CharField(max_length=10)),
                ('country', models.CharField(default='India', max_length=100)),
                ('date_of_engagement', models.DateField(default=django.db.models.functions.datetime.Now)),
                ('client_type', models.CharField(choices=[('Individual', 'Individual'), ('Entity', 'Entity')], max_length=20)),
                ('business_structure', models.CharField(blank=True, choices=[('Proprietorship', 'Proprietorship'), ('Private Ltd', 'Private Limited'), ('Public Ltd', 'Public Limited'), ('LLP', 'Limited Liability Partnership'), ('OPC', 'One Person Company'), ('Section 8', 'Section 8 Company'), ('HUF', 'Hindu Undivided Family'), ('Partnership', 'Partnership Firm')], max_length=50, null=True)),
                ('status', models.CharField(choices=[('Prospect', 'Prospect'), ('Incorporation in progress', 'Incorporation in progress'), ('Incorporated', 'Incorporated'), ('Closed', 'Closed'), ('On-hold', 'On-hold')], default='Prospect', max_length=50)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assigned_ca', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='clients_assigned', to=settings.AUTH_USER_MODEL)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='clients_created', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='DocumentMaster',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(max_length=100)),
                ('document_name', models.CharField(max_length=200)),
                ('is_active', models.BooleanField(default=True)),
            ],
        ),
        migrations.CreateModel(
            name='DocumentRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True, null=True)),
                ('due_date', models.DateField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('for_all_clients', models.BooleanField(default=False)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='document_requests', to='home.client')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_requests', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='GSTDetails',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('gst_number', models.CharField(max_length=15)),
                ('registered_address', models.TextField(blank=True, null=True)),
                ('state', models.CharField(blank=True, max_length=50)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='gst_details', to='home.client')),
            ],
        ),
        migrations.CreateModel(
            name='Task',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('service_type', models.CharField(choices=[('GST Return', 'GST Return Filing'), ('ITR Filing', 'Income Tax Return (ITR)'), ('Audit', 'Audit Services'), ('ROC Compliance', 'ROC / MCA Compliance'), ('TDS Return', 'TDS Return Filing'), ('Consultancy', 'General Consultancy')], max_length=50)),
                ('task_title', models.CharField(max_length=255)),
                ('description', models.TextField(blank=True, null=True)),
                ('due_date', models.DateField()),
                ('completed_date', models.DateField(blank=True, null=True)),
                ('priority', models.CharField(choices=[('High', 'High'), ('Medium', 'Medium'), ('Low', 'Low')], default='Medium', max_length=20)),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('In Progress', 'In Progress'), ('Review', 'Review'), ('Completed', 'Completed'), ('Cancelled', 'Cancelled')], default='Pending', max_length=50)),
                ('recurrence_period', models.CharField(choices=[('None', 'One-time'), ('Monthly', 'Monthly'), ('Quarterly', 'Quarterly'), ('Yearly', 'Yearly')], default='None', max_length=20)),
                ('agreed_fee', models.DecimalField(decimal_places=2, default=0.0, max_digits=12)),
                ('fee_status', models.CharField(choices=[('Unbilled', 'Unbilled'), ('Billed', 'Billed'), ('Paid', 'Paid')], default='Unbilled', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('assignees', models.ManyToManyField(blank=True, related_name='assigned_tasks', to=settings.AUTH_USER_MODEL)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='tasks', to='home.client')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_tasks', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='TaskStatusLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('old_status', models.CharField(max_length=50)),
                ('new_status', models.CharField(max_length=50)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('changed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='status_logs', to='home.task')),
            ],
        ),
        migrations.CreateModel(
            name='TaskExtendedAttributes',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('period_month', models.CharField(blank=True, max_length=20, null=True)),
                ('period_year', models.CharField(blank=True, max_length=10, null=True)),
                ('financial_year', models.CharField(blank=True, max_length=10, null=True)),
                ('assessment_year', models.CharField(blank=True, max_length=10, null=True)),
                ('total_turnover', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('gross_total_income', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('tax_payable', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('refund_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('audit_fee', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('pan_number', models.CharField(blank=True, max_length=20, null=True)),
                ('ack_number', models.CharField(blank=True, max_length=50, null=True)),
                ('arn_number', models.CharField(blank=True, max_length=50, null=True)),
                ('udin_number', models.CharField(blank=True, max_length=50, null=True)),
                ('srn_number', models.CharField(blank=True, max_length=50, null=True)),
                ('din_numbers', models.TextField(blank=True, null=True)),
                ('filing_date', models.DateField(blank=True, null=True)),
                ('date_of_signing', models.DateField(blank=True, null=True)),
                ('meeting_date', models.DateField(blank=True, null=True)),
                ('json_file', models.FileField(blank=True, null=True, upload_to='tasks/json/')),
                ('computation_file', models.FileField(blank=True, null=True, upload_to='tasks/computations/')),
                ('ack_file', models.FileField(blank=True, null=True, upload_to='tasks/ack/')),
                ('audit_report_file', models.FileField(blank=True, null=True, upload_to='tasks/audit_reports/')),
                ('gst_return_type', models.CharField(blank=True, choices=[('GSTR-1', 'GSTR-1'), ('GSTR-3B', 'GSTR-3B'), ('GSTR-9', 'GSTR-9'), ('CMP-08', 'CMP-08'), ('NONE', 'None')], help_text='Select GST return type', max_length=20, null=True)),
                ('taxable_value', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('igst_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('cgst_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('sgst_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('cess_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('itc_available', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('itc_claimed', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('late_fee_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('interest_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('challan_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('challan_date', models.DateField(blank=True, null=True)),
                ('gstin_number', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='tasks', to='home.gstdetails')),
                ('task', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='extended_attributes', to='home.task')),
            ],
        ),
        migrations.CreateModel(
            name='TaskDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to='task_documents/%Y/%m/')),
                ('description', models.CharField(blank=True, max_length=255)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='home.task')),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='TaskComment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('text', models.TextField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('author', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='home.task')),
            ],
        ),
        migrations.CreateModel(
            name='RequestedDocument',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('document_master', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='home.documentmaster')),
                ('document_request', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='required_documents', to='home.documentrequest')),
            ],
            options={
                'unique_together': {('document_request', 'document_master')},
            },
        ),
        migrations.CreateModel(
            name='Employee',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('designation', models.CharField(blank=True, max_length=255, null=True)),
                ('personal_phone', models.CharField(blank=True, max_length=20, null=True)),
                ('work_phone', models.CharField(blank=True, max_length=20, null=True)),
                ('personal_email', models.EmailField(blank=True, max_length=254, null=True)),
                ('address', models.TextField(blank=True, null=True)),
                ('profile_pic', models.ImageField(blank=True, null=True, upload_to='profile_pics/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='employee', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ClientDocumentUpload',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('uploaded_file', models.FileField(upload_to='client_documents/%Y/%m/%d/')),
                ('upload_date', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(choices=[('Pending', 'Pending'), ('Uploaded', 'Uploaded'), ('Overdue', 'Overdue')], default='Pending', max_length=20)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('client', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='document_uploads', to='home.client')),
                ('requested_document', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='uploads', to='home.requesteddocument')),
                ('uploaded_by', models.ForeignKey(blank=True, help_text='User who uploaded the document', null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='ClientBusinessProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('registration_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='CIN / LLPIN / Reg No')),
                ('date_of_incorporation', models.DateField(blank=True, null=True, verbose_name='Date of Incorp/Formation')),
                ('registered_office_address', models.TextField(blank=True, null=True)),
                ('udyam_registration', models.CharField(blank=True, max_length=100, null=True, verbose_name='MSME/Udyam Reg')),
                ('authorised_capital', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('paid_up_capital', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True, verbose_name='Paid-up Capital / Contribution')),
                ('number_of_directors', models.PositiveIntegerField(blank=True, null=True)),
                ('number_of_shareholders', models.PositiveIntegerField(blank=True, null=True)),
                ('number_of_members', models.PositiveIntegerField(blank=True, null=True)),
                ('number_of_coparceners', models.PositiveIntegerField(blank=True, null=True)),
                ('opc_nominee_name', models.CharField(blank=True, max_length=255, null=True)),
                ('object_clause', models.TextField(blank=True, help_text='Main Objects / Business Activity', null=True)),
                ('is_section8_license_obtained', models.BooleanField(default=False, verbose_name='Section 8 License Obtained?')),
                ('constitution_document_1', models.FileField(blank=True, null=True, upload_to='entity_docs/const_1/')),
                ('constitution_document_2', models.FileField(blank=True, null=True, upload_to='entity_docs/const_2/')),
                ('client', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='business_profile', to='home.client')),
                ('karta', models.ForeignKey(blank=True, limit_choices_to={'client_type': 'Individual'}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='huf_as_karta', to='home.client')),
                ('key_persons', models.ManyToManyField(blank=True, help_text='Select Directors, Partners, or Members already in the database.', related_name='associated_entities', to='home.client')),
            ],
        ),
        migrations.CreateModel(
            name='TaskAssignmentStatus',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status_context', models.CharField(max_length=50)),
                ('is_completed', models.BooleanField(default=False)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('order', models.PositiveIntegerField(default=0)),
                ('task', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assignment_statuses', to='home.task')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['order'],
                'unique_together': {('task', 'user', 'status_context')},
            },
        ),
        migrations.CreateModel(
            name='ClientUserEntitle',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('clients', models.ManyToManyField(related_name='user_mappings', to='home.client')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='client_mappings', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'unique_together': {('user',)},
            },
        ),
    ]
